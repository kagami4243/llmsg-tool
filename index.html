<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">

  <title>llmsg-tool</title>
  <link href="https://fonts.googleapis.com/css?family=Google+Sans|Noto+Sans|Castoro" rel="stylesheet">

  <link rel="stylesheet" href="static/css/bulma.min.css">
  <link rel="stylesheet" href="static/css/bulma-carousel.min.css">
  <link rel="stylesheet" href="static/css/bulma-slider.min.css">
  <link rel="stylesheet" href="static/css/fontawesome.all.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jpswalsh/academicons@1/css/academicons.min.css">
  <link rel="stylesheet" href="static/css/index.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="https://documentcloud.adobe.com/view-sdk/main.js"></script>
  <!-- <script defer src="static/js/fontawesome.all.min.js"></script> -->
  <script src="static/js/bulma-carousel.min.js"></script>
  <script src="static/js/bulma-slider.min.js"></script>
  <script src="static/js/index.js"></script>
  <script src="https://kit.fontawesome.com/dcd6d05807.js" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</head>

<body>


  <section class="section" id="LiveDemo">
    <div class="container is-max-desktop">
      <h2 class="title">Result:</h2>
      <div class="row g-3">
        <div class="col">
          <div class="input-group mb-3">
            <button type="button" class="btn btn-outline-secondary" disabled>Scene</button>
            <input id="currenScene" readonly type="text" class="form-control" value="accident"/>
            <button type="button" class="btn btn-outline-secondary dropdown-toggle dropdown-toggle-split"
              data-bs-toggle="dropdown" aria-expanded="false">
              <span class="visually-hidden">Toggle Dropdown</span>
            </button>
            <ul class="dropdown-menu" id="dropdownList">
              <!-- Add your scene here -->
              <li class="dropdown-item">accident</li>
              <li class="dropdown-item">bus</li>
              <li class="dropdown-item">ambulance</li>
              <li class="dropdown-item">cut-in-line</li>
              <li class="dropdown-item">crime</li>
              <li class="dropdown-item">highway</li>
              <li class="dropdown-item">three-cars-in-one-lane</li>
              <li class="dropdown-item">sudden-jaywalker</li>
              <li class="dropdown-item">surrounded</li>
              <li class="dropdown-item">earlier-next-ramp</li>
              <li class="dropdown-item">three-cars-in-one-lane-2</li>
              <li class="dropdown-item">merge-alternately</li>
              <li class="dropdown-item">should-accelerate-when-changing-lanes</li>
              <li class="dropdown-item">simultaneously-change-lanes-to-the-middle</li>
              
            </ul>
          </div>
        </div>
        <div class="col">
          <button type="button" class="btn btn-outline-secondary w-100" onclick="viewScene()">Run</button>
        </div>
      </div>
      <div class="row g-3" style="margin-top: 1rem;">
        <div class="col">
          <p class="fw-bold">Scene Script</p>
          <pre id="showSceneScript" style="height: 500px; width:630px; overflow-y: auto; background-color: #f5f5f5;"></pre>
        </div>
        <div class="col">
          <p class="fw-bold">Result Video</p>
          <div id="showResult" style="height: 360px; width: 640px;">
            <video poster="" id="tree" controls autoplay muted loop height="100%" width="100%">
                <!-- Your video here -->
                <source src="static/videos/accident.mp4" type="video/mp4"/>
            </video>
          </div>
        </div>
      </div>
    </div>
  </section>


  <footer class="footer">
    <div class="container">
      <div class="columns is-centered">
        <div class="column is-8">
          <div class="content">

            <p style="text-align: center;"><i class="fa-solid fa-heart fa-beat-fade" style="color: #ff8787;"></i>
              This page was built using the <a href="https://github.com/eliahuhorwitz/Academic-project-page-template"
                target="_blank">Academic Project Page Template</a> <i class="fa-solid fa-heart fa-beat-fade"
                style="color: #ff8787;"></i>
            </p>

          </div>
        </div>
      </div>
    </div>
  </footer>

</body>
<script>
  function viewScene() {
    var currentScene = $('#currenScene').val();
    var TDPath = 'static/videos/' + currentScene + '.mp4';
    $('#tree').attr('src', TDPath);
  }
  function getJson(url){
    fetch(url)
      .then(response => response.json())
      .then(data => {
            // 将 JSON 数据格式化为字符串并插入到 <pre> 标签中
            document.getElementById('showSceneScript').textContent = JSON.stringify(data, null, 2);
        })
        .catch(error => {
            console.error('Error fetching the JSON file:', error);
            document.getElementById('showSceneScript').textContent = '无法加载 JSON 文件。';
        })
  }
  $(document).ready(function () {
    $("#dropdownList li").click(function () {
      var scene = $(this).text();
      $("#currenScene").val(scene);
      getJson("static/text/scenes/"+scene+"/script.json")
    });
    getJson("static/text/scenes/accident/script.json");
  });

</script>
</html>