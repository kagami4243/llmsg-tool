<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">

  <title>llmsg-tool</title>
  <link href="https://fonts.googleapis.com/css?family=Google+Sans|Noto+Sans|Castoro" rel="stylesheet">

  <link rel="stylesheet" href="static/css/bulma.min.css">
  <link rel="stylesheet" href="static/css/bulma-carousel.min.css">
  <link rel="stylesheet" href="static/css/bulma-slider.min.css">
  <link rel="stylesheet" href="static/css/fontawesome.all.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jpswalsh/academicons@1/css/academicons.min.css">
  <link rel="stylesheet" href="static/css/index.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
  <link rel="stylesheet" href="static/css/table.css">

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="https://documentcloud.adobe.com/view-sdk/main.js"></script>
  <!-- <script defer src="static/js/fontawesome.all.min.js"></script> -->
  <script src="static/js/bulma-carousel.min.js"></script>
  <script src="static/js/bulma-slider.min.js"></script>
  <script src="static/js/index.js"></script>
  <script src="https://kit.fontawesome.com/dcd6d05807.js" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</head>

<body>
    
    <section class="hero">
        <div class="hero-body">
          <div class="container is-max-desktop">
            <div class="columns is-centered">
              <div class="column has-text-centered">
                <h1 class="title is-1 publication-title">LASER: 由自主代理执行脚本以进行按需交通模拟</h1>
    
                <a href=index.html>English</a> | 中文
                
                <div class="column has-text-centered">
                  <div class="publication-links">
    
                    <!-- Github link -->
                    <span class="link-block">
                      <a href="https://github.com/CXYyp5SkNg/CXYyp5SkNg.github.io" target="_blank"
                        class="external-link button is-normal is-rounded is-dark">
                        <span class="icon">
                          <i class="fab fa-github"></i>
                        </span>
                        <span>Code</span>
                      </a>
                    </span>
    
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>
    
      <!-- Paper abstract -->
      <section class="section hero is-light">
        <div class="container is-max-desktop">
          <div class="columns is-centered has-text-centered">
            <div class="column is-four-fifths">
              <h2 class="title is-3">摘要</h2>
              <div class="content has-text-justified">
                <p>
                  <b>
                    自动驾驶系统（ADS）需要多样且对安全至关重要的交通场景以进行有效的训练和测试，
                    但现有的数据生成方法在灵活性和可扩展性方面存在困难。我们提出了LASER，
                    这是一种新颖的框架，利用大语言模型（LLM）基于自然语言输入进行交通模拟。
                    该框架分为两个阶段：首先从用户提供的描述中生成脚本，然后使用自主代理在实时环境中执行这些脚本。
                    在CARLA模拟器中验证后，LASER能够成功生成复杂的、按需定制的驾驶场景，
                    显著改善了ADS训练和测试数据的生成。
                  </b>
                </p>
              </div>
            </div>
          </div>
        </div>
      </section>
      <!-- End paper abstract -->
    
    
      <!-- Framework. -->   
      <section class="section" id="Framework">
        <div class="container is-max-desktop">
          <h2 class="title">框架</h2>
          <div class="hero-body">
            <center>
                <img src="static/images/framework.png" width="80%"/>
            </center>
            <h2 class="subtitle has-text-justified" style="padding-top: 1rem;" style="width: 80%;">
                为了实现按需和交互式的交通模拟，我们提出了一个名为 LASER 的框架。<br/>
                LASER 由两个阶段组成，分别由两个模块实现，即<b>脚本编写器（script writer）</b>和<b>LARSER代理（LASER-Agent）</b>。
                与之前基于学习的方法同时进行生成和模拟不同，我们的 LASER 框架首先生成脚本，
                这些脚本根据用户需求的自然语言指令定义逻辑链行为（LCB）。然后，
                通过 LARSER代理 的实时协作来执行脚本。
            </h2>
          </div>
        </div>
      </section>
    
  <!--show video here-->
  <section class="section" id="LiveDemo">
    <div class="container is-max-desktop">
    <h2 class="title">结果：</h2>
      <ol>
          <li>选择场景，你将看到对应的脚本。</li>
          <li>点击运行，你将看到实际模拟录制视频的回放。</li>
      </ol>
      <div class="row g-3">
        <div class="col">
          <div class="input-group mb-3">
            <button type="button" class="btn btn-outline-secondary" disabled>场景</button>
            <input id="currenScene" readonly type="text" class="form-control" value="Accident"/>
            <button type="button" class="btn btn-outline-secondary dropdown-toggle dropdown-toggle-split"
              data-bs-toggle="dropdown" aria-expanded="false">
              <span class="visually-hidden">Toggle Dropdown</span>
            </button>
            <ul class="dropdown-menu" id="dropdownList">
              <!-- Add your scene here -->
              <li class="dropdown-item">Accident</li>
              <li class="dropdown-item">Ambulance</li>
              <li class="dropdown-item">Bus</li>
              <li class="dropdown-item">Caught in Pincer</li>
              <li class="dropdown-item">Cut-in</li>
              <li class="dropdown-item">Failed at Start</li>
              <li class="dropdown-item">Meet in Mind 1</li>
              <li class="dropdown-item">Meet in Mind 2</li>
              <li class="dropdown-item">Merge Alternately</li>
              <li class="dropdown-item">Newbie Lane Change 1</li>
              <li class="dropdown-item">Newbie Lane Change 2</li>
              <li class="dropdown-item">Reckless Driving</li>
              <li class="dropdown-item">Sudden Jaywalker</li>
              <li class="dropdown-item">Surrounded</li>
              <li class="dropdown-item">Swerve</li>
              <li class="dropdown-item">Three in Line 1</li>
              <li class="dropdown-item">Three in Line 2</li>
              
            </ul>
          </div>
        </div>
        <div class="col">
          <button type="button" class="btn btn-outline-secondary w-100" onclick="viewScene()">运行</button>
        </div>
      </div>
      <div class="row g-3" style="margin-top: 1rem;">
        <div class="col">
          <p class="fw-bold">场景脚本</p>
          <pre id="showSceneScript" style="height: 500px; width:630px; overflow-y: auto; background-color: #f5f5f5;"></pre>
        </div>
        <div class="col has-text-centered">
          <p class="fw-bold">结果视频</p>
          <div id="showResult" style="height: 360px; width: 640px;">
            <video poster="" id="tree" controls autoplay muted loop height="100%" width="100%">
                <!-- Your video here -->
                <source src="static/videos/Accident.mp4" type="video/mp4"/>
            </video>
          </div>
          实际模拟录制视频的回放
        </div>
      </div>
    </div>
  <!-- </section> -->

    <!--criteria for reviewing simulations-->
  <section class="section" id="Criteria">
    <div class="container is-max-desktop">
      <h2 class="title">场景生成正确性的标准:</h2>
      我们提出了人工评价场景生成正确性的标准.
      <table>
        <tr>
            <th>场景</th>
            <th>标准</th>
        </tr>
        <tr>
            <td>Accident</td>
            <td>两辆车按照脚本正确变道，避免与前方事故车辆相撞。</td>
        </tr>
        <tr>
            <td>Ambulance</td>
            <td>当救护车接近时，同车道的车辆一个接一个地让道，没有发生任何碰撞。</td>
        </tr>
        <tr>
            <td>Bus</td>
            <td>公交车变道并在停靠在公交站误差2.5米范围内，然后再次启动并变道回来。</td>
        </tr>
        <tr>
          <td>Caught in Pincer</td>
          <td>前车突然变道和后车加速导致三辆车发生碰撞。</td>
        </tr>
        <tr>
          <td>Cut-in</td>
          <td>汽车成功超越前车后减速。</td>
        </tr>
        <tr>
          <td>Failed at Start</td>
          <td>当车辆启动时与变道的公交车发生碰撞。</td>
        </tr>
        <tr>
          <td>Meet in Mind 1</td>
          <td>两辆车同时向中间车道变道导致相撞。</td>
        </tr>
        <tr>
          <td>Meet in Mind 2</td>
          <td>两辆车同时尝试超车，且在同时变道时发生碰撞。</td>
        </tr>
        <tr>
          <td>Merge Alternately</td>
          <td>车辆交替通过因碰撞而停下的两辆车的左侧车道。</td>
        </tr>
        <tr>
          <td>Newbie Lane Change 1</td>
          <td>前右方车辆缓慢向左变道，与自车发生碰撞。</td>
        </tr>
        <tr>
          <td>Newbie Lane Change 2</td>
          <td>前右方车辆缓慢向左变道，与自车发生碰撞。</td>
        </tr>
        <tr>
          <td>Reckless Driving</td>
          <td>鲁莽的车辆成功从左车道超越第一辆车，并从右车道超越第二辆车。</td>
        </tr>
        <tr>
          <td>Sudden Jaywalker</td>
          <td>当自车接近时行人从卡车后面走出。</td>
        </tr>
        <tr>
          <td>Surrounded</td>
          <td>四辆警车分别在车辆的前、后、左、右方向行驶。</td>
        </tr>
        <tr>
          <td>Swerve</td>
          <td>前车减速停车，后车在与前车相撞前变道进入自车车道，差点撞上自车。</td>
        </tr>
        <tr>
          <td>Three in Line 1</td>
          <td>前车减速停车，后车在与前车相撞前向右变道，然后驶离。</td>
        </tr>
        <tr>
          <td>Three in Line 2</td>
          <td>前方车辆减速并停下，后方车辆与其相撞并停下。自车打算右转以避免碰撞。</td>
        </tr>
      </table>
    </div>
  </section>


  <footer class="footer">
    <div class="container">
      <div class="columns is-centered">
        <div class="column is-8">
          <div class="content">

            <p style="text-align: center;"><i class="fa-solid fa-heart fa-beat-fade" style="color: #ff8787;"></i>
              This page was built using the <a href="https://github.com/eliahuhorwitz/Academic-project-page-template"
                target="_blank">Academic Project Page Template</a> <i class="fa-solid fa-heart fa-beat-fade"
                style="color: #ff8787;"></i>
            </p>

          </div>
        </div>
      </div>
    </div>
  </footer>

</body>
<script>
  function viewScene() {
    var currentScene = $('#currenScene').val();
    var TDPath = 'static/videos/' + currentScene + '.mp4';
    $('#tree').attr('src', TDPath);
  }
  function getJson(url){
    fetch(url)
      .then(response => response.json())
      .then(data => {
            // 将 JSON 数据格式化为字符串并插入到 <pre> 标签中
            document.getElementById('showSceneScript').textContent = JSON.stringify(data, null, 2);
        })
        .catch(error => {
            console.error('Error fetching the JSON file:', error);
            document.getElementById('showSceneScript').textContent = '无法加载 JSON 文件。';
        })
  }
  $(document).ready(function () {
    $("#dropdownList li").click(function () {
      var scene = $(this).text();
      $("#currenScene").val(scene);
      getJson("static/text/scenes/"+scene+"/script.json")
    });
    getJson("static/text/scenes/Accident/script.json");
  });

</script>
</html>